g1 <- g1 + myconfig + theme(legend.position="none")
g1 <- g1 + labs(x = '', y = 'parameter value') + ylim(0.3,2.2)
print(g1)
ggsave(plot = g1, "_plots/lr_mp_hrch_violin.png", width = 4, height = 4, type = "cairo-png", units = "in")
?rnorm
plot_dens_grp <- stan_plot(fit_rl, pars=c('lr_mu','lr_sd', 'tau_mu','tau_sd'), show_density=T, fill_color = 'skyblue')
ggsave(plot = plot_dens_grp, "_plots/lr_mp_hrch_grp_dens.png", width = 3, height = 4, type = "cairo-png", units = "in")
ggsave(plot = plot_dens_grp, "_plots/lr_mp_hrch_grp_dens.png", width = 4, height = 4, type = "cairo-png", units = "in")
print(fit_rl, pars = c('lr_mu','lr_sd', 'tau_mu','tau_sd'))
rm(list=ls(all=TRUE))
myData = read.csv('C:/Users/Lei Zhang/Desktop/ctaltona1.csv', header = TRUE, sep = ",")
myData = read.csv('E:/teaching/others/Ship_time_ChaoLu/ctaltona1.csv', header = TRUE, sep = ",")
myData$ta = as.character(myData$ta)
myData$tb = as.character(myData$tb)
myData$t0 = as.character("2015/09/01 0:00")
myData$tx = as.character("2016/08/25 14:00")
myData$ta_std = as.POSIXct(myData$ta, format="%Y/%m/%d %H:%M", tz="GMT")
myData$tb_std = as.POSIXct(myData$tb, format="%Y/%m/%d %H:%M", tz="GMT")
myData$t0_std = as.POSIXct(myData$t0, format="%Y/%m/%d %H:%M", tz="GMT")
myData$tx_std = as.POSIXct(myData$tx, format="%Y/%m/%d %H:%M", tz="GMT")
myData
myData = read.csv('E:/teaching/others/Ship_time_ChaoLu/ctaltona1.csv', header = TRUE, sep = ",")
myData$ta = as.character(myData$ta)
myData$tb = as.character(myData$tb)
myData$ta_std = as.POSIXct(myData$ta, format="%Y/%m/%d %H:%M", tz="GMT")
myData$tb_std = as.POSIXct(myData$tb, format="%Y/%m/%d %H:%M", tz="GMT")
myData
myData$ta_std = as.POSIXct(myData$ta, format="%d/%m/%Y %H:%M", tz="GMT")
myData$tb_std = as.POSIXct(myData$tb, format="%d/%m/%Y %H:%M", tz="GMT")
myData
myData$t0 = as.character("2015/09/01 0:00")
myData$tx = as.character("2016/08/25 14:00")
myData$t0_std = as.POSIXct(myData$t0, format="%Y/%m/%d %H:%M", tz="GMT")
myData$tx_std = as.POSIXct(myData$tx, format="%Y/%m/%d %H:%M", tz="GMT")
myData
myData
myData = read.csv('E:/teaching/others/Ship_time_ChaoLu/ctaltona1.csv', header = TRUE, sep = ",")
myData$ta = as.character(myData$ta)
myData$tb = as.character(myData$tb)
myData$ta_std = as.POSIXct(myData$ta, format="%d/%m/%Y %H:%M", tz="GMT")
myData$tb_std = as.POSIXct(myData$tb, format="%d/%m/%Y %H:%M", tz="GMT")
t0 = "2015/09/01 0:00"
tx = "2016/08/25 14:00"
t0_std = as.POSIXct(myData$t0, format="%Y/%m/%d %H:%M", tz="GMT")
tx_std = as.POSIXct(myData$tx, format="%Y/%m/%d %H:%M", tz="GMT")
t0_std = as.POSIXct(t0, format="%Y/%m/%d %H:%M", tz="GMT")
tx_std = as.POSIXct(tx, format="%Y/%m/%d %H:%M", tz="GMT")
t0  = t0_std
tx  = tx_std
t1  = myData$ta_std
t2  = myData$tb_std
brz = myData$brz
n = array(0, as.numeric(difftime(tx, t0, units = 'mins')) + 1)
tx
t0
my_brz <- function(t1, t2, t0, tx, brz) {
n = array(0, as.numeric(difftime(tx, t0, units = 'mins')) + 1)
for (j in 1:length(brz) ) {
if (class(t1)[1] == 'POSIXct') {
t_start = as.numeric(difftime(t1[j], t0, units = 'mins')) + 1
t_end   = as.numeric(difftime(t2[j], t0, units = 'mins')) + 1
} else {
t_start = t1[j] - t0 + 1
t_end   = t2[j] - t0 + 1
}
n[t_start:t_end] = rep(brz[j], t_end - t_start + 1)
}
return(n)
}
n = my_brz(t1,t2,t0,tx, brz)
plot(1:length(n), n)
library(ggplot2)
df = data.frame(time = 1:length(n), weight = n/1000)
g  = ggplot(df, aes(time, weight))
g  = g + geom_jitter(width=0.5, height=0.5, size=3, shape = 21,
colour='dodgerblue4', fill='dodgerblue1', alpha=0.8)
g  = g + labs(x = 'time (min)', y = 'weight of cruise ship (KT)')
g  = g + theme_grey(base_size = 20)
print(g)
ggsave(plot = g, "exampleBRZ1.png", width = 7, height = 4, type = "cairo-png", units = "in")
View(myData)
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_single_parm_main_master.R')
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_single_parm_main_master.R')
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
rstan:::rstudio_stanc("_scripts/reinforcement_learning_sp_ss_model.stan")
rstan:::rstudio_stanc("_scripts/reinforcement_learning_sp_ss_model.stan")
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
out1 <- run_rl_sp(F)
out1 <- run_rl_sp(multiSubj = F)
out1 <- run_rl_sp(multiSubj = FALSE)
traceback()
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
out1 <- run_rl_sp(multiSubj = FALSE)
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
out1 <- run_rl_sp(multiSubj = FALSE)
multiSubj = FALSE
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
out1 <- run_rl_sp(multiSubj = FALSE)
rstan:::rstudio_stanc("_scripts/reinforcement_learning_sp_ms_model.stan")
stan_trace(out1, pars = c('lr','tau'), inc_warmup = F)
stan_plot(outl, pars=c('lr','tau'), show_density=T, fill_color = 'skyblue')
stan_plot(out1, pars=c('lr','tau'), show_density=T, fill_color = 'skyblue')
rstan:::rstudio_stanc("_scripts/reinforcement_learning_mp_indv_model.stan")
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
out2 <- run_rl_sp(multiSubj = T)
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main_master.R')
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main.R')
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main.R')
rstan:::rstudio_stanc("_scripts/reinforcement_learning_mp_indv_model.stan")
rstan:::rstudio_stanc("_scripts/reinforcement_learning_mp_hrch_model.stan")
rstan:::rstudio_stanc("_scripts/reinforcement_learning_mp_hrch_model.stan")
out3 <- run_rl_mp('indv')
out4 <- run_rl_mp('hrch')
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main.R')
out4 <- run_rl_mp('hrch')
source('E:/Dropbox/BayesCog/reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main.R')
out4 <- run_rl_mp('hrch')
source('E:/Dropbox/BayesCog/06.reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
fit_rl1 <- run_rl_sp(F)
source('E:/Dropbox/BayesCog/06.reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main.R')
fit_rl3 <- run_rl_mp( modelType ='hrch' )
lr = rnorm(10, 0.6, 0.12)
tau = rnorm(10, 1.5, 0.2)
data_summary <- function(x) {
m <- mean(x)
ymin <- m-sd(x)
ymax <- m+sd(x)
return(c(y=m,ymin=ymin,ymax=ymax))
}
pars_true_value <- matrix(rl_par, 20, 1)
pars_name  <- as.factor(c(rep('lr',10),rep('tau',10)))
df2 <- data.frame(pars_true_value=pars_true_value, pars_name=pars_name)
g2 <- ggplot(df2, aes(x=pars_name, y=pars_true_value, color = pars_name, fill=pars_name))
g2 <- g2 + geom_violin(trim=TRUE, size=2)
g2 <- g2 + stat_summary(fun.data=data_summary, geom="pointrange", color="black", size=1.5)
g2 <- g2 + scale_fill_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + scale_color_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + myconfig + theme(legend.position="none")
g2 <- g2 + labs(x = '', y = 'parameter value')
print(g2)
load('_data/rl_mp.RData')
pars_true_value <- matrix(rl_mp, 20, 1)
pars_name  <- as.factor(c(rep('lr',10),rep('tau',10)))
df2 <- data.frame(pars_true_value=pars_true_value, pars_name=pars_name)
g2 <- ggplot(df2, aes(x=pars_name, y=pars_true_value, color = pars_name, fill=pars_name))
g2 <- g2 + geom_violin(trim=TRUE, size=2)
g2 <- g2 + stat_summary(fun.data=data_summary, geom="pointrange", color="black", size=1.5)
g2 <- g2 + scale_fill_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + scale_color_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + myconfig + theme(legend.position="none")
g2 <- g2 + labs(x = '', y = 'parameter value')
print(g2)
library(ggplot2)
pars_true_value <- matrix(rl_par, 20, 1)
pars_name  <- as.factor(c(rep('lr',10),rep('tau',10)))
df2 <- data.frame(pars_true_value=pars_true_value, pars_name=pars_name)
g2 <- ggplot(df2, aes(x=pars_name, y=pars_true_value, color = pars_name, fill=pars_name))
g2 <- g2 + geom_violin(trim=TRUE, size=2)
g2 <- g2 + stat_summary(fun.data=data_summary, geom="pointrange", color="black", size=1.5)
g2 <- g2 + scale_fill_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + scale_color_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + myconfig + theme(legend.position="none")
g2 <- g2 + labs(x = '', y = 'parameter value')
print(g2)
pars_true_value <- matrix(rl_mp, 20, 1)
pars_name  <- as.factor(c(rep('lr',10),rep('tau',10)))
df2 <- data.frame(pars_true_value=pars_true_value, pars_name=pars_name)
g2 <- ggplot(df2, aes(x=pars_name, y=pars_true_value, color = pars_name, fill=pars_name))
g2 <- g2 + geom_violin(trim=TRUE, size=2)
g2 <- g2 + stat_summary(fun.data=data_summary, geom="pointrange", color="black", size=1.5)
g2 <- g2 + scale_fill_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + scale_color_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + myconfig + theme(legend.position="none")
g2 <- g2 + labs(x = '', y = 'parameter value')
print(g2)
lr = rnorm(10, 0.6, 0.12)
tau = rnorm(10, 1.5, 0.2)
rl_par = c(lr, tau)
data_summary <- function(x) {
m <- mean(x)
ymin <- m-sd(x)
ymax <- m+sd(x)
return(c(y=m,ymin=ymin,ymax=ymax))
}
pars_true_value <- matrix(rl_par, 20, 1)
pars_name  <- as.factor(c(rep('lr',10),rep('tau',10)))
df2 <- data.frame(pars_true_value=pars_true_value, pars_name=pars_name)
g2 <- ggplot(df2, aes(x=pars_name, y=pars_true_value, color = pars_name, fill=pars_name))
g2 <- g2 + geom_violin(trim=TRUE, size=2)
g2 <- g2 + stat_summary(fun.data=data_summary, geom="pointrange", color="black", size=1.5)
g2 <- g2 + scale_fill_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + scale_color_manual(values=c("#2179b5", "#c60256"))
g2 <- g2 + myconfig + theme(legend.position="none")
g2 <- g2 + labs(x = '', y = 'parameter value')
print(g2)
load('_data/rl_mp.RData')
sz <- dim(rl_mp)
rl_mp
nSubjects <- sz[1]
nTrials   <- sz[2]
nSubjects
nTrials
source('E:/teaching/BayesCog_2018/BayesCog_2018_materials/06.reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
library(rstan)
library(ggplot2)
library(R.matlab)
multiSubj = FALSE
load('_data/rl_sp_ms.RData')
sz <- dim(rl_ms)
nSubjects <- sz[1]
nTrials   <- sz[2]
dataList <- list(nSubjects=nSubjects,
nTrials=nTrials,
choice=rl_ms[,,1],
reward=rl_ms[,,2])
rl_ms
load('_data/rl_sp_ss.RData')
rl_ss
head(rl_ss)
source('E:/teaching/BayesCog_2018/BayesCog_2018_materials/06.reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
load('_data/rl_sp_ss.RData')
sz <- dim(rl_ss)
nTrials <- sz[1]
dataList <- list(nTrials=nTrials,
choice=rl_ss[,1],
reward=rl_ss[,2])
modelFile <- '_scripts/reinforcement_learning_sp_ss_model.stan'
nIter     <- 2000
nChains   <- 4
nWarmup   <- floor(nIter/2)
nThin     <- 1
cat("Estimating", modelFile, "model... \n")
startTime = Sys.time(); print(startTime)
cat("Calling", nChains, "simulations in Stan... \n")
fit_rl <- stan(modelFile,
data    = dataList,
chains  = nChains,
iter    = nIter,
warmup  = nWarmup,
thin    = nThin,
init    = "random",
seed    = 1450154626)
cat("Finishing", modelFile, "model simulation ... \n")
endTime = Sys.time(); print(endTime)
cat("It took",as.character.Date(endTime - startTime), "\n")
source('E:/teaching/BayesCog_2018/BayesCog_2018_materials/06.reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
f = run_rl_sp(multiSubj = FALSE)
f = run_rl_sp(multiSubj = T)
source('E:/teaching/BayesCog_2018/BayesCog_2018_materials/06.reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main_master.R')
f = run_rl_pp()
f = run_rl_mp()
rm(list=ls(all=TRUE))
source('E:/teaching/BayesCog_2018/BayesCog_2018_materials/06.reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main_master.R')
f = run_rl_mp()
modelType = 'indv'
library(rstan)
library(ggplot2)
library(R.matlab)
load('_data/rl_mp.RData')
sz <- dim(rl_mp)
nSubjects <- sz[1]
nTrials   <- sz[2]
dataList <- list(nSubjects=nSubjects,
nTrials=nTrials,
choice=rl_mp[,,1],
reward=rl_mp[,,2])
rstan_options(auto_write = TRUE)
options(mc.cores = 2)
rstan:::rstudio_stanc("_scripts/reinforcement_learning_mp_indv_model.stan")
rstan_options(auto_write = TRUE)
options(mc.cores = 2)
modelFile <- '_scripts/reinforcement_learning_mp_indv_model.stan'
nIter     <- 2000
nChains   <- 4
nWarmup   <- floor(nIter/2)
nThin     <- 1
cat("Estimating", modelFile, "model... \n")
startTime = Sys.time(); print(startTime)
cat("Calling", nChains, "simulations in Stan... \n")
fit_rl <- stan(modelFile,
data    = dataList,
chains  = nChains,
iter    = nIter,
warmup  = nWarmup,
thin    = nThin,
init    = "random",
control  = list(adapt_delta=0.999, max_treedepth=100),
seed    = 1450154626
)
fit_rl <- stan(modelFile,
data    = dataList,
chains  = nChains,
iter    = nIter,
warmup  = nWarmup,
thin    = nThin,
init    = "random",
seed    = 1450154626
)
source('E:/teaching/BayesCog_2018/BayesCog_2018/06.reinforcement_learning/_scripts/reinforcement_learning_single_parm_main.R')
fit_rl1 = run_rl_sp()
library(hBayesDM)
L = bandit2arm_delta(data = '_data/rawdata.txt', niter = 100, nwarmup = 0,ncore = 1)
L = bandit2arm_delta(data = '_data/rawdata.txt', niter = 1000, nwarmup = 0,ncore = 1)
L = bandit2arm_delta(data = '_data/rawdata.txt', niter = 1000, nwarmup = 0,ncore = 4)
L = bandit2arm_delta(data = '_data/rawdata.txt', niter = 1000, nwarmup = 10,ncore = 4)
library(rstan)
Sys.setenv(LOCAL_CPPFLAGS = '-march=native')
L = bandit2arm_delta(data = '_data/rawdata.txt', niter = 1000, nwarmup = 10,ncore = 4)
source('E:/teaching/BayesCog_2018/BayesCog_2018/06.reinforcement_learning/_scripts/reinforcement_learning_multi_parm_main.R')
)
head(d1)
head(dataList)
head(gain)
warnings()
glimpse(predicted)
glimpse(sim)
glimpse(predictd)
glimpse(predicted)
str(predicted)
alpha
3^5
sim
pairs()
pairs(fit)
head(gain)
head(loss)
head(gain)
abs(-2)
fit.nonoise <- fit
data_var <-  read_excel('data_ICE_variables.xlsx') 
glimpse(data)
glimpse(data_var)
glimpse(data_var)
load('data_ICE.dta')
glimpse(data)
glimpse(data)
library(bridgesampling)
str(pvl.lambda)
library("xlsx")
install.packages('xlsx')
26
N
head(gain)
glimpse(gain)
head(gain)
choice
head(gain)
glimpse(index)
data <- merge(gain, loss) 
head(gain)
head(loss)
head(data)
head(data)
head(choice)
head(choice)
head(data)
head(gain)
head(loss)
head(choice)
head(data)
head(index)
head(index)
head(gain)
 help('pareto-k-diagnostic')
pareto_k_ids(vse.noise)
loo::pareto_k_ids(vse.noise)
loo::pareto_k_ids(loo.vse.noise)
loo.vse.noise
N
k
glimpse(log_lik)
head(log_lik)
132.5589 +139.9021 + 62.93034 + 62.29829
nrow(x)
nrow(x)
nrow(x$y_pred[,1,])
x1
xi
xi
head(xi)
head(summary.all)
glimpse(d)
model
model
warnings()
name
i
dim(obs)
load('./cluster/output/vse_human_1.rdata')
glimpse(pred)
pred$y_pred
pred
glimpse(pred)
glimpse(pred)
glimpse(summary.all)
names
nsubjs
i
pred$subjID
dim(pred)
dim(pred)
dim(pred)
head(pred)
pred$V1
pred$V23
pred$V22
mlv(c(1,2,2,3), method = 'mfv')
mlv(c(1,2,2,3,3), method = 'mfv')
glimpse(accuracy_mean)
glimpse(accuracy.noise_mean)
glimpse(accuracy)
glimpse(accuracy_mean)
glimpse(accuracy)
glimpse(accuracy_lean)
glimpse(accuracy_mean)
head(summary.all)
n_cols(p)
ncol(p)
str(accuracy)
str(obs.all)
str(p)
str(acc)
str(acc)
str(acc)
str(accuracy)
x
str(x)
str(x)
df1 = data.frame(V1 = c(1,2,3), V2 = c(2,3,4))
df1
df2 = 2*df1
df2
z = (df1 == df2)
z
df1 = data.frame(V1 = c(1,2,3), V2 = c(2,3,NA))
df2 = 2*df1
z = (df1 == df2)
z
z = as.numeric(df1 == df2)
z
z = (df1 == df2)
mean(z$V1)
z$V1
z
str(z)
z <- as.data.frame(z)
z
mean(z$V1)
str(z)
mean(df$V1)
mean(df1$V1)
mean(as.numeric(z$V1))
z
z = (df1 == df2)
mean(as.numeric(z$V1))
m
dim(acc)
str(diff)
str(diff)
b
str(acc)
str(obs)
str(diff)
str(diff)
str(diff)
str(diff)
obs
obs
acc
acc
obs
library(gt)
)
)
)
str(out)
xtable(out, title = 'hhh')
print(xtable(out), 'html')
print(xtable(out), 'org')
library(knitr)
knitr::ktable(out)
help(xtable)
help(print.data.frame)
out
print(out)
print.data.frame(out)
d.param
str(d)
d
d.param
d.param
unique(d$species)
unique(d.param$species)
d.param
install.packages('BayesFactor')
26
str(z)
26
lirary(janitor)
library(janitor)
